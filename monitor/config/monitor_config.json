{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"onStatusChanged(slot1)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"0"},"key":"0"},{"code":"onStatusChanged(slot2)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"1"},"key":"1"},{"code":"onStatusChanged(slot3)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"2"},"key":"2"},{"code":"onStatusChanged(slot4)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"3"},"key":"3"},{"code":"onStatusChanged(slot5)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"4"},"key":"4"},{"code":"onStatusChanged(slot6)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"5"},"key":"5"},{"code":"onStatusChanged(slot7)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"6"},"key":"6"},{"code":"onStatusChanged(slot8)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"7"},"key":"7"},{"code":"onStatusChanged(slot9)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"8"},"key":"8"},{"code":"onStatusChanged(slot10)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"9"},"key":"9"},{"code":"function debug(a,b)if a~=debugId then return end;system.print(\"MON#\"..self.getId()..\" \"..b)end;function slotValid(c)return c and type(c)==\"table\"and type(c.export)==\"table\"and c.getElementClass end;function onStatusChanged(c)debug(c.getId(),\"#\"..c.getId()..\" status=> \"..c.getStatus())storeStatus(c)databank.setIntValue(\"updated\",1)end;function storeStatus(c)if not slotValid(c)or not c.getStatus then return end;local a=c.getId()if not a then return end;debug(a,\"Store Unit #\"..a..\" in databank\")local d={id=a,status=c.getStatus(),cyclesCount=c.getCycleCountSinceStartup(),efficiency=c.getEfficiency(),uptime=c.getUptime(),source=self.getId()}databank.setIntValue(tostring(a)..\"_updated\",1)databank.setStringValue(tostring(a),json.encode(d))end;function searchForDataSlot()for e,c in pairs(unit)do if slotValid(c)and c.getElementClass():lower()=='databankunit'then databank=c;debugId=databank.getIntValue(\"debugId\")if debugId>0 then system.print(\"Debugging #\"..debugId)end;return end end end;function queryAllSlots()for e,c in pairs(unit)do storeStatus(c)end;databank.setIntValue(\"updated\",1)end;function onStop()end;function onStart()searchForDataSlot()end;unit.hide()databank=nil;debugId=0;onStart()if not databank then system.print(\"Databank not connected to monitor board! \"..self.getId())self.exit()return end;queryAllSlots()","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"10"},{"code":"onStop()","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"11"}],"methods":[],"events":[]}