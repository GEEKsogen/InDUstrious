{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"system.print(\"Slot2 statusChanged\")\nsystem.print(\"status=\"..status)\nsystem.print(\"slot:\"..self.getId())\n\nstoreStatus(slot2)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"1"},"key":"0"},{"code":"storeStatus(slot3)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"2"},"key":"1"},{"code":"storeStatus(slot4)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"3"},"key":"2"},{"code":"storeStatus(slot5)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"4"},"key":"3"},{"code":"storeStatus(slot6)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"5"},"key":"4"},{"code":"storeStatus(slot7)\n","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"6"},"key":"5"},{"code":"storeStatus(slot8)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"7"},"key":"6"},{"code":"storeStatus(slot9)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"8"},"key":"7"},{"code":"storeStatus(slot10)","filter":{"args":[{"variable":"*"}],"signature":"statusChanged(status)","slotKey":"9"},"key":"8"},{"code":"\nfunction slotValid(slot)\n    return slot \n    and type(slot) == \"table\"\n    and type(slot.export) == \"table\"\n    and slot.getElementClass\nend\n\n\nfunction storeStatus(slot)\n    if not slotValid(slot) or not slot.getStatus then return end\n    \n    local elementId = slot.getId();\n    if elementId == nil then return end\n    --system.print(\"ElementId:\"..elementId)\n    \n    local info = {\n       id = elementId,\n       status = slot.getStatus(),\n       cyclesCount = slot.getCycleCountSinceStartup(),\n       efficiency = slot.getEfficiency(),\n       uptime = slot.getUptime(),\n       source = self.getId(),\n       updated = 1\n    }\n    databank.setStringValue(tostring(elementId), json.encode(info))\nend\n\n\nfunction searchForDataSlot()\n    --system.print(\"Searching slots for databank\")\n    for _, slot in pairs(unit) do        \n        if slotValid(slot)  then\n            --system.print(\"Slot id: \"..slot.getId())\n            if slot.getElementClass():lower() == 'databankunit' then\n                databank = slot\n                return\n            end\n        end\n    end\nend\n\nfunction queryAllSlots()\n    for _, slot in pairs(unit) do\n        storeStatus(slot)\n    end\nend\n\nsystem.print(\"Board [\" .. self.getId() .. \"] ON!\")\nunit.hide()\n\ndatabank = nil\nsearchForDataSlot()\nif not databank then\n    system.print(\"Databank not connected!\")\n    self.exit()\n    return\nend\n\nqueryAllSlots()","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"9"},{"code":"system.print(\"Board '\" .. selfData.name .. \"' OFF!\")","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"10"},{"code":"","filter":{"args":[],"signature":"start()","slotKey":"-2"},"key":"11"}],"methods":[],"events":[]}